<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="logo.png"><title>ä»‹ç» | EuBackend</title><meta name="description" content="åŸºäºSpringBootå¼€å‘çš„è½»é‡çº§å¿«é€Ÿå¼€å‘å¹³å°ğŸ”¥ğŸ”¥ğŸ”¥">
    <link rel="preload" href="/assets/style-9b453563.css" as="style"><link rel="stylesheet" href="/assets/style-9b453563.css">
    <link rel="modulepreload" href="/assets/app-66e3ac06.js"><link rel="modulepreload" href="/assets/02_htsc.html-2115282b.js"><link rel="modulepreload" href="/assets/02_htsc.html-52e89bef.js"><link rel="prefetch" href="/assets/index.html-f187d0a4.js" as="script"><link rel="prefetch" href="/assets/index.html-98f18934.js" as="script"><link rel="prefetch" href="/assets/index.html-9bde4266.js" as="script"><link rel="prefetch" href="/assets/changelog.html-3d6ffe6c.js" as="script"><link rel="prefetch" href="/assets/donate.html-914472ca.js" as="script"><link rel="prefetch" href="/assets/faq.html-e03d1d12.js" as="script"><link rel="prefetch" href="/assets/index.html-28757bcb.js" as="script"><link rel="prefetch" href="/assets/index.html-1e27a14e.js" as="script"><link rel="prefetch" href="/assets/01_hjbs.html-4f248356.js" as="script"><link rel="prefetch" href="/assets/faq.html-a1adbb8e.js" as="script"><link rel="prefetch" href="/assets/01_hjbs.html-23e947e3.js" as="script"><link rel="prefetch" href="/assets/faq.html-d8563854.js" as="script"><link rel="prefetch" href="/assets/01_hjbs.html-cec223f9.js" as="script"><link rel="prefetch" href="/assets/faq.html-5d891148.js" as="script"><link rel="prefetch" href="/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/assets/index.html-0124d406.js" as="script"><link rel="prefetch" href="/assets/index.html-2fd7047a.js" as="script"><link rel="prefetch" href="/assets/index.html-8b1a5db0.js" as="script"><link rel="prefetch" href="/assets/changelog.html-a0e626d5.js" as="script"><link rel="prefetch" href="/assets/donate.html-44b7fbad.js" as="script"><link rel="prefetch" href="/assets/faq.html-a5bbc9ee.js" as="script"><link rel="prefetch" href="/assets/index.html-ee75eae8.js" as="script"><link rel="prefetch" href="/assets/index.html-bf1624ab.js" as="script"><link rel="prefetch" href="/assets/01_hjbs.html-719b2790.js" as="script"><link rel="prefetch" href="/assets/faq.html-b3ed6917.js" as="script"><link rel="prefetch" href="/assets/01_hjbs.html-37582060.js" as="script"><link rel="prefetch" href="/assets/faq.html-184e1432.js" as="script"><link rel="prefetch" href="/assets/01_hjbs.html-bd03bda2.js" as="script"><link rel="prefetch" href="/assets/faq.html-421471d7.js" as="script"><link rel="prefetch" href="/assets/404.html-31f2dbfc.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-1777558f.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/logo.png" alt="EuBackend"><span class="site-name can-hide">EuBackend</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/guide" class="" aria-label="å¿«é€Ÿå¼€å§‹"><!--[--><!--]--> å¿«é€Ÿå¼€å§‹ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/backend" class="router-link-active" aria-label="åç«¯æŒ‡å—"><!--[--><!--]--> åç«¯æŒ‡å— <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue2" class="" aria-label="Vue2æŒ‡å—"><!--[--><!--]--> Vue2æŒ‡å— <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue3" class="" aria-label="Vue3æŒ‡å—"><!--[--><!--]--> Vue3æŒ‡å— <!--[--><!--]--></a></div><div class="navbar-item"><a href="/other/donate" class="" aria-label="ğŸ’èµåŠ©"><!--[--><!--]--> ğŸ’èµåŠ© <!--[--><!--]--></a></div><div class="navbar-item"><a href="/other/faq" class="" aria-label="å¸¸è§é—®é¢˜"><!--[--><!--]--> å¸¸è§é—®é¢˜ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/other/changelog" class="" aria-label="æ›´æ–°æ—¥å¿—"><!--[--><!--]--> æ›´æ–°æ—¥å¿— <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/zhaoeryu" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://gitee.com/zhaoeryu" rel="noopener noreferrer" target="_blank" aria-label="Gitee"><!--[--><!--]--> Gitee <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="æœç´¢æ–‡æ¡£" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/guide" class="" aria-label="å¿«é€Ÿå¼€å§‹"><!--[--><!--]--> å¿«é€Ÿå¼€å§‹ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/backend" class="router-link-active" aria-label="åç«¯æŒ‡å—"><!--[--><!--]--> åç«¯æŒ‡å— <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue2" class="" aria-label="Vue2æŒ‡å—"><!--[--><!--]--> Vue2æŒ‡å— <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue3" class="" aria-label="Vue3æŒ‡å—"><!--[--><!--]--> Vue3æŒ‡å— <!--[--><!--]--></a></div><div class="navbar-item"><a href="/other/donate" class="" aria-label="ğŸ’èµåŠ©"><!--[--><!--]--> ğŸ’èµåŠ© <!--[--><!--]--></a></div><div class="navbar-item"><a href="/other/faq" class="" aria-label="å¸¸è§é—®é¢˜"><!--[--><!--]--> å¸¸è§é—®é¢˜ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/other/changelog" class="" aria-label="æ›´æ–°æ—¥å¿—"><!--[--><!--]--> æ›´æ–°æ—¥å¿— <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/zhaoeryu" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://gitee.com/zhaoeryu" rel="noopener noreferrer" target="_blank" aria-label="Gitee"><!--[--><!--]--> Gitee <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">æ–‡æ¡£ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/backend" class="router-link-active sidebar-item" aria-label="ä»‹ç»"><!--[--><!--]--> ä»‹ç» <!--[--><!--]--></a><!----></li><li><a href="/backend/doc/01_hjbs.html" class="sidebar-item" aria-label="ç¯å¢ƒéƒ¨ç½²"><!--[--><!--]--> ç¯å¢ƒéƒ¨ç½² <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">å…¶ä»– <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/backend/other/faq.html" class="sidebar-item" aria-label="å¸¸è§é—®é¢˜"><!--[--><!--]--> å¸¸è§é—®é¢˜ <!--[--><!--]--></a><!----></li><li><a href="/other/donate.html" class="sidebar-item" aria-label="æ”¯æŒé¡¹ç›®"><!--[--><!--]--> æ”¯æŒé¡¹ç›® <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#ä»‹ç»" aria-hidden="true">#</a> ä»‹ç»</h1><h2 id="è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯" aria-hidden="true">#</a> è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯</h2><h3 id="è·å–å½“å‰ç™»å½•ç”¨æˆ·" tabindex="-1"><a class="header-anchor" href="#è·å–å½“å‰ç™»å½•ç”¨æˆ·" aria-hidden="true">#</a> è·å–å½“å‰ç™»å½•ç”¨æˆ·</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">AuthUser</span> user <span class="token operator">=</span> <span class="token class-name">SecurityUtil</span><span class="token punctuation">.</span><span class="token function">getLoginUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è§’è‰²åˆ—è¡¨" tabindex="-1"><a class="header-anchor" href="#è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è§’è‰²åˆ—è¡¨" aria-hidden="true">#</a> è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è§’è‰²åˆ—è¡¨</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SysRole</span><span class="token punctuation">&gt;</span></span> roles <span class="token operator">=</span> <span class="token class-name">SecurityUtil</span><span class="token punctuation">.</span><span class="token function">getLoginUserRoles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="æƒé™æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#æƒé™æ³¨è§£" aria-hidden="true">#</a> æƒé™æ³¨è§£</h2><p>é¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº†<code>Sa-Token</code>ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—çš„æ³¨è§£ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ§åˆ¶è®¿é—®æƒé™ã€‚</p><h3 id="sacheckpermission" tabindex="-1"><a class="header-anchor" href="#sacheckpermission" aria-hidden="true">#</a> @SaCheckPermission</h3><p>å½“å‰ç™»å½•ç”¨æˆ·å¿…é¡»æœ‰æŒ‡å®šçš„åŠŸèƒ½æƒé™æ‰èƒ½è®¿é—®</p><p>ç¤ºä¾‹ï¼šä»¥ä¸‹ä»£ç è¡¨ç¤ºå½“å‰ç™»å½•ç”¨æˆ·å¿…é¡»æœ‰<code>system:user:list</code>æƒé™æ‰èƒ½è®¿é—®</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SaCheckPermission</span><span class="token punctuation">(</span><span class="token string">&quot;system:user:list&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@GetMapping</span>
<span class="token keyword">public</span> <span class="token class-name">ResultBody</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">ResultBody</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="sacheckrole" tabindex="-1"><a class="header-anchor" href="#sacheckrole" aria-hidden="true">#</a> @SaCheckRole</h3><p>å½“å‰ç™»å½•ç”¨æˆ·å¿…é¡»æœ‰æŒ‡å®šçš„è§’è‰²æ‰èƒ½è®¿é—®</p><p>ç¤ºä¾‹ï¼šä»¥ä¸‹ä»£ç è¡¨ç¤ºå½“å‰ç™»å½•ç”¨æˆ·å¿…é¡»æœ‰<code>ceo</code>è§’è‰²æ‰èƒ½è®¿é—®</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SaCheckRole</span><span class="token punctuation">(</span><span class="token string">&quot;ceo&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@GetMapping</span>
<span class="token keyword">public</span> <span class="token class-name">ResultBody</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">ResultBody</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="saignore" tabindex="-1"><a class="header-anchor" href="#saignore" aria-hidden="true">#</a> @SaIgnore</h3><p>è¢«æ³¨è§£çš„æ–¹æ³•ä¸ä¼šè¿›è¡Œé‰´æƒ</p><p>ç¤ºä¾‹ï¼šä»¥ä¸‹ä»£ç è¡¨ç¤ºè®¿é—®è¯¥æ¥å£ä¸éœ€è¦é‰´æƒ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SaIgnore</span>
<span class="token annotation punctuation">@GetMapping</span>
<span class="token keyword">public</span> <span class="token class-name">ResultBody</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">ResultBody</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æƒ³è¦äº†è§£æ›´è¯¦ç»†çš„å†…å®¹ï¼Œå¯ä»¥æŸ¥çœ‹<a href="https://sa-token.cc/doc.html#/use/at-check" target="_blank" rel="noopener noreferrer">Sa-Tokenå®˜æ–¹æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><h2 id="è‡ªåŠ¨å¡«å……åˆ›å»ºäººå’Œä¿®æ”¹äºº" tabindex="-1"><a class="header-anchor" href="#è‡ªåŠ¨å¡«å……åˆ›å»ºäººå’Œä¿®æ”¹äºº" aria-hidden="true">#</a> è‡ªåŠ¨å¡«å……åˆ›å»ºäººå’Œä¿®æ”¹äºº</h2><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæ¯ä¸ªè¡¨æ­£å¸¸æƒ…å†µä¸‹éƒ½åº”è¯¥ä¼šæœ‰<code>åˆ›å»ºäºº</code>ã€<code>ä¿®æ”¹äºº</code>å­—æ®µï¼Œä½†æ˜¯å¦‚æœæ¯æ¬¡æ–°å¢å’Œä¿®æ”¹æ“ä½œçš„æ—¶å€™ï¼Œéƒ½è¦å»è®¾ç½®è¿™ä¸¤ä¸ªå­—æ®µå°±ä¼šå¾ˆç¹çï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿè‡ªåŠ¨å¡«å……è¿™ä¸¤ä¸ªå­—æ®µã€‚</p><p>é¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº†<code>Mybatis-Plus</code>ï¼Œ<code>Mybatis-Plus</code>æä¾›äº†<code>MetaObjectHandler</code>æ¥å£ï¼Œæˆ‘ä»¬åªéœ€è¦å®ç°è¿™ä¸ªæ¥å£ï¼Œç„¶ååœ¨åˆ›å»ºäººå’Œä¿®æ”¹äººå­—æ®µä¸Šæ·»åŠ <code>@TableField(fill = FieldFill.{INSERT/UPDATE})</code>å³å¯ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MetaHandler</span> <span class="token keyword">implements</span> <span class="token class-name">MetaObjectHandler</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertFill</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> metaObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// å¡«å……åˆ›å»ºäºº</span>
            <span class="token class-name">String</span> userId <span class="token operator">=</span> <span class="token function">currentUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">strictInsertFill</span><span class="token punctuation">(</span>metaObject<span class="token punctuation">,</span> <span class="token string">&quot;createBy&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateFill</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> metaObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// å¡«å……ä¿®æ”¹äºº</span>
            <span class="token class-name">String</span> userId <span class="token operator">=</span> <span class="token function">currentUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">strictUpdateFill</span><span class="token punctuation">(</span>metaObject<span class="token punctuation">,</span> <span class="token string">&quot;updateBy&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><div class="highlight-line">Â </div><div class="highlight-line">Â </div><br><br><div class="highlight-line">Â </div><br><br><br><div class="highlight-line">Â </div><br><br><br><div class="highlight-line">Â </div><br><br><div class="highlight-line">Â </div><br><br><br><div class="highlight-line">Â </div><br><br><br><div class="highlight-line">Â </div><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®ä½“ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XxxxEntity</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>fill <span class="token operator">=</span> <span class="token class-name">FieldFill</span><span class="token punctuation">.</span><span class="token constant">INSERT</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> createBy<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>fill <span class="token operator">=</span> <span class="token class-name">FieldFill</span><span class="token punctuation">.</span><span class="token constant">UPDATE</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> updateBy<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><div class="highlight-line">Â </div><br><br><div class="highlight-line">Â </div><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç³»ç»Ÿæ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#ç³»ç»Ÿæ—¥å¿—" aria-hidden="true">#</a> ç³»ç»Ÿæ—¥å¿—</h2><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å¯¹ä¸€äº›å…³é”®çš„åŠ¨ä½œè¿›è¡Œæ—¥å¿—è®°å½•ï¼Œæ¯”å¦‚æ·»åŠ ç”¨æˆ·ã€åˆ é™¤ç”¨æˆ·ç­‰ã€‚ä¸€ä¸ªåŠ¨ä½œè°ƒç”¨ä¸€æ¬¡è®°å½•æ—¥å¿—çš„æ–¹æ³•ï¼Œæ¯æ¬¡è¿˜å¾…å»æ”¶é›†å‚æ•°ç­‰ï¼Œä¼šé€ æˆå¤§é‡çš„ä»£ç é‡å¤ã€‚æˆ‘ä»¬å¸Œæœ›ä»£ç ä¸­åªæœ‰ä¸šåŠ¡ç›¸å…³çš„æ“ä½œï¼Œä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¥è®°å½•æ—¥å¿—ã€‚</p><p>åœ¨éœ€è¦è®°å½•æ—¥å¿—çš„<code>controller</code>æ–¹æ³•ä¸Šæ·»åŠ <code>@Log</code>æ³¨è§£ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Log</span><span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">&quot;æ–°å¢éƒ¨é—¨&quot;</span><span class="token punctuation">,</span> businessType <span class="token operator">=</span> <span class="token class-name">BusinessType</span><span class="token punctuation">.</span><span class="token constant">INSERT</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@PostMapping</span>
<span class="token keyword">public</span> <span class="token class-name">ResultBody</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">return</span> <span class="token class-name">ResultBody</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ³¨è§£å‚æ•°è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#æ³¨è§£å‚æ•°è¯´æ˜" aria-hidden="true">#</a> æ³¨è§£å‚æ•°è¯´æ˜</h3><table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>title</td><td>String</td><td>æ— </td><td>æ“ä½œæ¨¡å—</td></tr><tr><td>businessType</td><td>BusinessType</td><td>OTHER</td><td>æ“ä½œåŠŸèƒ½ï¼ˆOTHERå…¶ä»–ã€INSERTæ–°å¢ã€UPDATEä¿®æ”¹ã€DELETEåˆ é™¤ã€EXPORTå¯¼å‡ºã€IMPORTå¯¼å…¥ç­‰ï¼‰</td></tr><tr><td>isSaveRequestData</td><td>boolean</td><td>true</td><td>æ˜¯å¦ä¿å­˜è¯·æ±‚çš„å‚æ•°</td></tr><tr><td>isSaveResponseData</td><td>boolean</td><td>true</td><td>æ˜¯å¦ä¿å­˜å“åº”çš„å‚æ•°</td></tr><tr><td>excludeParamNames</td><td>String[]</td><td>{}</td><td>æ’é™¤æŒ‡å®šçš„è¯·æ±‚å‚æ•°</td></tr></tbody></table><h3 id="è‡ªå®šä¹‰æ“ä½œåŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰æ“ä½œåŠŸèƒ½" aria-hidden="true">#</a> è‡ªå®šä¹‰æ“ä½œåŠŸèƒ½</h3><p>1ã€åœ¨<code>BusinessType.java</code>ä¸­æ–°å¢æ“ä½œåŠŸèƒ½ç±»å‹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">BusinessType</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token doc-comment comment">/**
     * æµ‹è¯•
     */</span>
    <span class="token constant">TEST</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><div class="highlight-line">Â </div><div class="highlight-line">Â </div><div class="highlight-line">Â </div><div class="highlight-line">Â </div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ã€åœ¨Vueé¡¹ç›®ä¸­çš„<code>src/utils/enums.js</code>ä¸­æ–°å¢æ“ä½œåŠŸèƒ½ç±»å‹</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> BusinessTypeEnums <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token constant">TEST</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;æµ‹è¯•&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><div class="highlight-line">Â </div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>@Log</code>æ³¨è§£çš„é€»è¾‘å®ç°ä»£ç <code>LogAspect.java</code></p><p>å¯ä»¥åœ¨<code>ç³»ç»Ÿç›‘æ§</code>/<code>æ“ä½œæ—¥å¿—</code>ä¸­è¿›è¡ŒæŸ¥çœ‹æ—¥å¿—æ•°æ®å’Œè¯¦ç»†ä¿¡æ¯</p><h2 id="æ•°æ®æƒé™" tabindex="-1"><a class="header-anchor" href="#æ•°æ®æƒé™" aria-hidden="true">#</a> æ•°æ®æƒé™</h2><p><code>åŠŸèƒ½æƒé™</code>æ§åˆ¶çš„æ˜¯ç”¨æˆ·å¯ä»¥è®¿é—®å“ªäº›èœå•ã€æŒ‰é’®ç­‰èµ„æºï¼Œè€Œ<code>æ•°æ®æƒé™</code>æ§åˆ¶çš„æ˜¯ç”¨æˆ·èƒ½çœ‹åˆ°çš„<code>æ•°æ®èŒƒå›´</code>ã€‚æ‰€è°“æ•°æ®èŒƒå›´ï¼Œä¸æ˜¯æŒ‡èƒ½çœ‹åˆ°çš„æ•°æ®å­—æ®µï¼Œè€Œæ˜¯æŒ‡èƒ½æŸ¥å‡ºæ¥çš„æ•°æ®é›†åˆã€‚ æ¯”å¦‚ï¼Œå‡ºçº³Aå’Œå‡ºçº³Bï¼Œä»–ä»¬éƒ½æœ‰æƒé™è®¿é—®è´¢åŠ¡ç®¡ç†æ¨¡å—ï¼Œä½†æ˜¯Aåªèƒ½çœ‹åˆ°Aè‡ªå·±çš„æ•°æ®ï¼ŒBåªèƒ½çœ‹åˆ°Bè‡ªå·±çš„æ•°æ®ï¼Œè¿™å°±æ˜¯æ•°æ®æƒé™çš„ä½œç”¨ã€‚</p><div class="custom-container tip"><p class="custom-container-title">æç¤º</p><p>é»˜è®¤ç³»ç»Ÿç®¡ç†å‘˜<code>admin</code>æ‹¥æœ‰æ‰€æœ‰æ•°æ®æƒé™<code>(sys_user.admin = 1)</code>ï¼Œé»˜è®¤è§’è‰²æ‹¥æœ‰æ‰€æœ‰æ•°æ®æƒé™ï¼ˆå¦‚ä¸éœ€è¦æ•°æ®æƒé™ä¸ç”¨è®¾ç½®æ•°æ®æƒé™æ“ä½œï¼‰</p></div><h3 id="æ•°æ®æƒé™çš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#æ•°æ®æƒé™çš„ä½¿ç”¨" aria-hidden="true">#</a> æ•°æ®æƒé™çš„ä½¿ç”¨</h3><p>1ã€ç›®å‰æ”¯æŒä»¥ä¸‹å‡ ç§æ•°æ®æƒé™ï¼š</p><ul><li><code>å…¨éƒ¨æ•°æ®æƒé™</code>ï¼šå¯ä»¥è®¿é—®æ‰€æœ‰æ•°æ®</li><li><code>æœ¬éƒ¨é—¨æ•°æ®æƒé™</code>ï¼šå¯ä»¥è®¿é—®æœ¬éƒ¨é—¨çš„æ•°æ®</li><li><code>æœ¬éƒ¨é—¨åŠä»¥ä¸‹æ•°æ®æƒé™</code>ï¼šå¯ä»¥è®¿é—®æœ¬éƒ¨é—¨åŠä»¥ä¸‹çš„æ•°æ®</li><li><code>è‡ªå®šä¹‰æ•°æ®æƒé™</code>ï¼šå¯ä»¥è®¿é—®è‡ªå®šä¹‰çš„æ•°æ®</li><li><code>æœ¬äººæ•°æ®æƒé™</code>ï¼šåªèƒ½è®¿é—®æœ¬äººçš„æ•°æ®</li></ul><p>2ã€åœ¨éœ€è¦æ•°æ®æƒé™æ§åˆ¶çš„åœ°æ–¹åŠ ä¸Š<code>@DataScope</code>æ³¨è§£</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/zhaoeryu/zhaoeryu.github.io/edit/master/docs/backend/doc/02_htsc.md" rel="noopener noreferrer" target="_blank" aria-label="å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢ï¼"><!--[--><!--]--> å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢ï¼ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-66e3ac06.js" defer></script>
  </body>
</html>
